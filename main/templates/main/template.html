{% load static %}
{% load i18n %}

<!DOCTYPE html>
<html>
<head>
    <title>Language Translator</title>
    <link rel="icon" href="data:,">
    <!-- Add Bootstrap CSS link -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="{% static '/css/style.css' %}">
</head>
<body>
    <div class="container mt-5">
        <h1 class="mb-4">Language Translator</h1>

        <form method="get" class="mb-4">
            <div class="input-group">
                <select class="form-select" id="languageSelect" name="language" {% if not is_toggle_on %}disabled{% endif %}>
                    <option value="Default" disabled>
                            Pilih Bahasa
                    </option>
                    {% for language in languages %}
                        <option value="{{ language.code }}" {% if language.code == selected_language %}selected{% endif %}>
                            {{ language.name }}
                        </option>
                    {% endfor %}
                </select>
            </div>
        </form>

        <div class="form-check form-switch mb-3">
            <input class="form-check-input" type="checkbox" id="toggleSwitch" {% if is_toggle_on %}checked{% endif %}>
            <label class="form-check-label" for="toggleSwitch">Toggle On/Off</label>
        </div>

        {% for menu_name, translation in menu_translations.items %}
        <div class="card">
            <div class="card-body">
                <p class="translation" hidden>{{ translation|default:"Translation not available"|safe }}</p>
                {% for menu in menus %}
                {% if menu.menu_name == menu_name %}
                <button type="button" class="btn btn-success play" data-bs-toggle="modal" data-bs-target="#modalTransation" data-translation="{{ translation }}" data-menu-id="{{ menu.menu_id }}" style="display: none;">Play</button>
                <img src="{{ menu.image_url }}" alt="{{ menu.menu_name }}">
                {% endif %}
                {% endfor %}
                <h5 class="card-title">{{ menu_name }}</h5>
            </div>
        </div>
        {% endfor %}


        {% comment %} modal popup {% endcomment %}
        <!-- Modal -->
        <div class="modal fade" id="modalTransation" tabindex="-1" aria-labelledby="modalTransationLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalTransationLabel">Translation</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p id="translationContent"></p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                        <a href="menu_detail" class="btn btn-primary buka-menu-button">Buka menu</a>
                    </div>
                </div>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script src="{% static 'js/custom.js' %}"></script>
    </div>
</body>
</html>
